{"ast":null,"code":"import { Register } from 'src/app/model/register.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/resetpassword.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction ResetpasswordComponent_div_9_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email or Mobile number is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_9_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Invalid or Mobile number format.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_9_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ResetpasswordComponent_div_9_div_6_div_1_Template, 2, 0, \"div\", 7);\n    i0.ɵɵtemplate(2, ResetpasswordComponent_div_9_div_6_div_2_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r4 = i0.ɵɵreference(5);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors == null ? null : _r4.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors == null ? null : _r4.errors.email);\n  }\n}\n\nfunction ResetpasswordComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"label\", 9);\n    i0.ɵɵtext(3, \"Email or Mobile number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 10, 11);\n    i0.ɵɵlistener(\"ngModelChange\", function ResetpasswordComponent_div_9_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.contact = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ResetpasswordComponent_div_9_div_6_Template, 3, 2, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ResetpasswordComponent_div_9_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.submitEmail();\n    });\n    i0.ɵɵtext(9, \"Send OTP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(5);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.contact);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r4.invalid && (_r4.dirty || _r4.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", _r4.invalid);\n  }\n}\n\nfunction ResetpasswordComponent_div_10_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"OTP is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_10_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ResetpasswordComponent_div_10_div_6_div_1_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r11 = i0.ɵɵreference(5);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r11.errors == null ? null : _r11.errors.required);\n  }\n}\n\nfunction ResetpasswordComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"label\", 15);\n    i0.ɵɵtext(3, \"OTP:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 16, 17);\n    i0.ɵɵlistener(\"ngModelChange\", function ResetpasswordComponent_div_10_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.user.otp = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ResetpasswordComponent_div_10_div_6_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ResetpasswordComponent_div_10_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.submitOtp();\n    });\n    i0.ɵɵtext(9, \"Verify OTP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r11 = i0.ɵɵreference(5);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.user.otp);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r11.invalid && (_r11.dirty || _r11.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", _r11.invalid);\n  }\n}\n\nfunction ResetpasswordComponent_div_11_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_11_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ResetpasswordComponent_div_11_div_6_div_1_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r17 = i0.ɵɵreference(5);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r17.errors == null ? null : _r17.errors.required);\n  }\n}\n\nfunction ResetpasswordComponent_div_11_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Confirm Password is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_11_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Passwords do not match.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResetpasswordComponent_div_11_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ResetpasswordComponent_div_11_div_12_div_1_Template, 2, 0, \"div\", 7);\n    i0.ɵɵtemplate(2, ResetpasswordComponent_div_11_div_12_div_2_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r19 = i0.ɵɵreference(11);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r19.errors == null ? null : _r19.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r19.errors == null ? null : _r19.errors.compare);\n  }\n}\n\nfunction ResetpasswordComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"label\", 19);\n    i0.ɵɵtext(3, \"New Password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 20, 21);\n    i0.ɵɵlistener(\"ngModelChange\", function ResetpasswordComponent_div_11_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.user.password = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ResetpasswordComponent_div_11_div_6_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8);\n    i0.ɵɵelementStart(8, \"label\", 22);\n    i0.ɵɵtext(9, \"Confirm Password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 23, 24);\n    i0.ɵɵlistener(\"ngModelChange\", function ResetpasswordComponent_div_11_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.confirmPassword = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, ResetpasswordComponent_div_11_div_12_Template, 3, 2, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function ResetpasswordComponent_div_11_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.resetpassword();\n    });\n    i0.ɵɵtext(14, \"Set New Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r17 = i0.ɵɵreference(5);\n\n    const _r19 = i0.ɵɵreference(11);\n\n    const ctx_r3 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(8);\n\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.user.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r17.invalid && (_r17.dirty || _r17.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.confirmPassword);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r19.invalid && (_r19.dirty || _r19.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", _r0.invalid);\n  }\n}\n\nexport let ResetpasswordComponent = /*#__PURE__*/(() => {\n  class ResetpasswordComponent {\n    constructor(_resetpasswordservice, _router) {\n      this._resetpasswordservice = _resetpasswordservice;\n      this._router = _router;\n      this.user = new Register();\n      this.otpSubmitted = false;\n      this.otpVerified = false;\n      this.confirmPassword = '';\n      this.contact = '';\n    }\n\n    ngOnInit() {}\n\n    submitEmail() {\n      if (/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.contact)) {\n        this.user.email = this.contact;\n        console.log(\"email entered: \" + this.user.email);\n      } else if (/^\\+(?:[0-9] ?){6,14}[0-9]$/.test(this.contact)) {\n        this.user.mobile = this.contact;\n        console.log(\"mobile entered: \" + this.user.mobile);\n      } else {\n        alert(\"Invalid input. Please enter a valid email or mobile number.\");\n        return;\n      }\n\n      this._resetpasswordservice.submitEmailORMObile(this.user).subscribe(response => {\n        if (response && response.status === \"success\") {\n          console.log(\"OTP sent successfully\");\n          window.alert(\"OTP sent successfully to: \" + this.user.email);\n          this.otpSubmitted = true;\n        } else if (response && response.status === \"failure\") {\n          console.log(\"your Credentials not present\");\n          window.alert(\"your Credentials not present\");\n          this.user = new Register();\n        } else {\n          console.log(\"Failed to send OTP\");\n          window.alert(\"Failed to send OTP. Please try again later.\");\n          this.user = new Register();\n        }\n      }, error => {\n        console.error(\"Error:\", error);\n        window.alert(\"An error occurred. Please try again later.\");\n        this.user = new Register();\n      });\n    }\n\n    submitOtp() {\n      this._resetpasswordservice.submitOtp(this.user).subscribe(response => {\n        if (response && response.status === \"success\") {\n          console.log(\"OTP verified Successfully\");\n          window.alert(\"OTP verified Successfully\");\n          this.otpVerified = true;\n        } else if (response && response.status === \"failure\") {\n          console.log(\"Invalid OTP. Please try again\");\n          window.alert(\"Invalid OTP. Please try again\");\n          this.otpSubmitted = false;\n          this.otpVerified = false;\n          this.user = new Register();\n        } else {\n          console.log(\"Failed to verify OTP. Please try again.\");\n          window.alert(\"Failed to verify OTP. Please try again.\");\n          this.otpSubmitted = false;\n          this.otpVerified = false;\n          this.user = new Register();\n        }\n\n        this.user.otp = '';\n      }, error => {\n        console.error(\"Error:\", error);\n        window.alert(\"An error occurred. Please try again later.\");\n        this.otpSubmitted = false;\n        this.otpVerified = false;\n        this.user = new Register();\n      });\n    }\n\n    resetpassword() {\n      if (this.user.password !== this.confirmPassword) {\n        console.log(\"check the password\");\n        window.alert(\"password does not match. Please try again\");\n        return;\n      }\n\n      this._resetpasswordservice.resetpassword(this.user).subscribe(response => {\n        if (response && response.status === \"success\") {\n          console.log(\"Reset Password Successfully\");\n          window.alert(\"Reset Password Successfully, Now you can Login\");\n\n          this._router.navigate(['/login']);\n\n          this.user = new Register();\n        } else if (response && response.status === \"failure\") {\n          console.log(\"cann't reset password\");\n          window.alert(\"cann't reset password\");\n          this.otpSubmitted = false;\n          this.otpVerified = false;\n          this.user = new Register();\n        }\n      }, error => {\n        console.error(\"Error:\", error);\n        window.alert(\"An error occurred. Please try again later.\");\n        this.otpSubmitted = false;\n        this.otpVerified = false;\n        this.user = new Register();\n      });\n    }\n\n  }\n\n  ResetpasswordComponent.ɵfac = function ResetpasswordComponent_Factory(t) {\n    return new (t || ResetpasswordComponent)(i0.ɵɵdirectiveInject(i1.ResetpasswordService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ResetpasswordComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ResetpasswordComponent,\n    selectors: [[\"app-resetpassword\"]],\n    decls: 12,\n    vars: 3,\n    consts: [[1, \"container\"], [1, \"row\", \"justify-content-center\", \"mt-5\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\", \"text-center\"], [\"mainForm\", \"ngForm\"], [4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"text\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"disabled\", \"click\"], [1, \"text-danger\"], [\"for\", \"otp\"], [\"type\", \"text\", \"id\", \"otp\", \"name\", \"otp\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"otpInput\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-success\", 3, \"disabled\", \"click\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"passwordInput\", \"ngModel\"], [\"for\", \"confirmPassword\"], [\"type\", \"password\", \"id\", \"confirmPassword\", \"name\", \"confirmPassword\", \"required\", \"\", \"compare\", \"user.password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"confirmPasswordInput\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]],\n    template: function ResetpasswordComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"h2\", 5);\n        i0.ɵɵtext(6, \"Password Reset\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"form\", null, 6);\n        i0.ɵɵtemplate(9, ResetpasswordComponent_div_9_Template, 10, 3, \"div\", 7);\n        i0.ɵɵtemplate(10, ResetpasswordComponent_div_10_Template, 10, 3, \"div\", 7);\n        i0.ɵɵtemplate(11, ResetpasswordComponent_div_11_Template, 15, 5, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", !ctx.otpSubmitted && !ctx.otpVerified);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.otpSubmitted && !ctx.otpVerified);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.otpVerified);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i4.NgIf, i3.DefaultValueAccessor, i3.RequiredValidator, i3.NgControlStatus, i3.NgModel],\n    styles: [\".card[_ngcontent-%COMP%]{background-color:#f4f4f4}\"]\n  });\n  return ResetpasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}